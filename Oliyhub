local library = loadstring(game:HttpGet("https://pastebin.com/raw/3vQbADjh", true))()
----------------------------------------------------------------------------------------------------------------------------------------
local window = library:new("Oliy hub")--V2
----------------------------------------------------------------------------------------------------------------------------------------

-- 存储运行中的循环和连接，便于管理
local runningLoops = {}
local eventConnections = {}

-- 通用函数：安全执行角色操作
local function safeCharacterOperation(callback)
    local character = game.Players.LocalPlayer.Character
    if character and character:FindFirstChild("Humanoid") then
        return callback(character)
    end
    return nil
end

-- 通用函数：创建受控循环
local function createControlledLoop(name, interval, func)
    if runningLoops[name] then
        runningLoops[name] = false
        task.wait(0.1)
    end
    
    runningLoops[name] = true
    task.spawn(function()
        while runningLoops[name] do
            local success = pcall(func)
            if not success and runningLoops[name] then
                runningLoops[name] = false
                break
            end
            task.wait(interval)
        end
    end)
end

-- 停止指定循环
local function stopLoop(name)
    if runningLoops[name] then
        runningLoops[name] = false
    end
end

-- 断开事件连接
local function disconnectEvent(name)
    if eventConnections[name] then
        eventConnections[name]:Disconnect()
        eventConnections[name] = nil
    end
end

local creds = window:Tab("关于", "6031097229")
local bin = creds:section("信息", true)
bin:Label("师傅FT岩")    
bin:Label("Oliy制作")
bin:Label("帮助者：hfh916")
bin:Label("会学习怎么做脚本")
bin:Label("作者QQ：1622103455")
bin:Label("发布日期：2025年8月18号")

local credits = creds:section("Ul设置", true)

credits:Toggle("移除UI辉光", "", false, function(state)
    local ui = game:GetService("CoreGui"):FindFirstChild("frosty is cute")
    if ui and ui.Main and ui.Main:FindFirstChild("DropShadowHolder") then
        ui.Main.DropShadowHolder.Visible = not state
    end
end)

credits:Toggle("彩虹UI", "", false, function(state)
    local ui = game:GetService("CoreGui"):FindFirstChild("frosty is cute")
    if ui and ui.Main then
        ui.Main.Style = state and "DropShadow" or "Custom"
    end
end)

credits:Toggle("脚本框架变小一点", "", false, function(state)
    local ui = game:GetService("CoreGui"):FindFirstChild("frosty is cute") or game:GetService("CoreGui"):FindFirstChild("frosty")
    if ui and ui.Main then
        ui.Main.Style = state and "DropShadow" or "Custom"
    end
end)

credits:Button("摧毁GUI", function()
    local ui = game:GetService("CoreGui"):FindFirstChild("frosty is cute")
    if ui then
        ui:Destroy()
    end
end)

local creds = window:Tab("通用", "6035145364")
local credits = creds:section("通用内容", true)

credits:Slider("步行速度!", "WalkSpeed", 16, 16, 400, false, function(Speed)
    stopLoop("WalkSpeedLoop")
    createControlledLoop("WalkSpeedLoop", 0.1, function()
        safeCharacterOperation(function(character)
            character.Humanoid.WalkSpeed = Speed
        end)
    end)
end)

credits:Slider("跳跃高度!", "JumpPower", 50, 50, 400, false, function(Jump)
    stopLoop("JumpPowerLoop")
    createControlledLoop("JumpPowerLoop", 0.1, function()
        safeCharacterOperation(function(character)
            character.Humanoid.JumpPower = Jump
        end)
    end)
end)

credits:Textbox("重力设置!", "Gravity", "输入", function(Gravity)
    stopLoop("GravityLoop")
    local num = tonumber(Gravity)
    if num then
        createControlledLoop("GravityLoop", 0.5, function()
            game.Workspace.Gravity = num
        end)
    end
end)

credits:Toggle("夜视", "Light", false, function(Light)
    stopLoop("NightVisionLoop")
    if Light then
        createControlledLoop("NightVisionLoop", 0.1, function()
            game.Lighting.Ambient = Color3.new(1, 1, 1)
        end)
    else
        game.Lighting.Ambient = Color3.new(0, 0, 0)
    end
end)

credits:Button("透视", function()
    pcall(function()
        loadstring(game:HttpGet("https://pastebin.com/raw/uw2P2fbY"))()
    end)
end)

credits:Button("隐身道具", function()
    pcall(function()
        loadstring(game:HttpGet("https://gist.githubusercontent.com/skid123skidlol/cd0d2dce51b3f20ad1aac941da06a1a1/raw/f58b98cce7d51e53ade94e7bb460e4f24fb7e0ff/%257BFE%257D%2520Invisible%2520Tool%2520(can%2520hold%2520tools)",true))()
    end)
end)

credits:Toggle("穿墙(可用)", "NoClip", false, function(NC)
    disconnectEvent("NoClip")
    
    if NC then
        eventConnections.NoClip = game:GetService("RunService").Stepped:Connect(function()
            safeCharacterOperation(function(character)
                for _, part in ipairs(character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end)
        end)
    else
        safeCharacterOperation(function(character)
            for _, part in ipairs(character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end)
    end
end)

credits:Button("最强透视",function()
    pcall(function()
        loadstring(game:HttpGet("https://pastebin.com/raw/uw2P2fbY"))()
    end)
end)

credits:Button("飞行v3",function()
    pcall(function()
        loadstring(game:HttpGet'https://raw.githubusercontent.com/XNEOFF/FlyGuiV3/main/FlyGuiV3.txt')()
    end)
end)

credits:Button("甩人",function()
    pcall(function()
        loadstring(game:HttpGet("https://pastebin.com/raw/zqyDSUWX"))()
    end)
end)

credits:Button("反挂机v2",function()
    pcall(function()
        loadstring(game:HttpGet("https://pastebin.com/raw/9fFu43FF"))()
    end)
end)

credits:Button("铁拳",function()
    pcall(function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/0Ben1/fe/main/obf_rf6iQURzu1fqrytcnLBAvW34C9N55kS9g9G3CKz086rC47M6632sEd4ZZYB0AYgV.lua.txt'))()
    end)
end)

credits:Button("键盘",function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/advxzivhsjjdhxhsidifvsh/mobkeyboard/main/main.txt"))()
    end)
end)

credits:Button("动画中心",function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/GamingScripter/Animation-Hub/main/Animation%20Gui", true))()
    end)
end)

credits:Button("立即死亡",function()
    safeCharacterOperation(function(character)
        character.Humanoid.Health = 0
    end)
end)

credits:Button("爬墙",function()
    pcall(function()
        loadstring(game:HttpGet("https://pastebin.com/raw/zXk4Rq2r"))()
    end)
end)

credits:Button("转起来",function()
    pcall(function()
        loadstring(game:HttpGet('https://pastebin.com/raw/r97d7dS0', true))()
    end)
end)

credits:Button("子弹追踪",function()
    pcall(function()
        loadstring(game:HttpGet("https://pastebin.com/raw/1AJ69eRG"))()
    end)
end)

credits:Button("飞车",function()
    pcall(function()
        loadstring(game:HttpGet("https://pastebin.com/raw/63T0fkBm"))()
    end)
end)

credits:Button("吸人",function()
    pcall(function()
        loadstring(game:HttpGet("https://shz.al/~HHAKS"))()
    end)
end)

credits:Button("无限跳跃",function()
    pcall(function()
        loadstring(game:HttpGet("https://pastebin.com/raw/V5PQy3y0", true))()
    end)
end)

credits:Toggle("人物显示", "RWXS", false, function(RWXS)
    if RWXS then
        getgenv().enabled = true
        getgenv().filluseteamcolor = true
        getgenv().outlineuseteamcolor = true
        getgenv().fillcolor = Color3.new(1, 0, 0)
        getgenv().outlinecolor = Color3.new(1, 1, 1)
        getgenv().filltrans = 0.5
        getgenv().outlinetrans = 0.5
        pcall(function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Vcsk/RobloxScripts/main/Highlight-ESP.lua"))()
        end)
    else
        getgenv().enabled = false
    end
end)

credits:Button("死亡笔记", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/krlpl/dfhj/main/%E6%AD%BB%E4%BA%A1%E7%AC%94%E8%AE%B0.txt"))()
    end)
end)

local creds = window:Tab("其他脚本", "6035145364")
local credits = creds:section("其他脚本", true)

credits:Button("叶脚本", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/roblox-ye/QQ515966991/refs/heads/main/ROBLOX-CNVIP-XIAOYE.lua"))()
    end)
end)

credits:Button("皮脚本", function()
    pcall(function()
        getgenv().XiaoPi="皮脚本QQ群1002100032" 
        loadstring(game:HttpGet("https://raw.githubusercontent.com/xiaopi77/xiaopi77/main/QQ1002100032-Roblox-Pi-script.lua"))()
    end)
end)

credits:Button("科脚本", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/yun5555555555/Ke/refs/heads/main/%E7%A7%91%E8%84%9A%E6%9C%AC%E6%89%A7%E8%A1%8C%E5%99%A8.lua"))()
    end)
end)

credits:Button("殺脚本", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/FengYu-3/FengYu/refs/heads/main/QQ1926190957.lua"))()
    end)
end)

credits:Button("黄脚本", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/MIAN57/-/refs/heads/main/%E9%BB%84%E8%84%9A%E6%9C%AC"))()
    end)
end)

local creds = window:Tab("森林中的99夜", "6035145364")
local credits = creds:section("脚本", true)

credits:Button("二狗子脚本", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/gycgchgyfytdttr/shenqin/refs/heads/main/99day.lua"))()
    end)
end)

local creds = window:Tab("墨水游戏", "6035145364")
local credits = creds:section("脚本", true)

credits:Button("inkgame 1", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/VapeVoidware/VW-Add/main/inkgame.lua", true))()
    end)
end)

credits:Button("TX墨水", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/TexRBLX/Roblox-stuff/refs/heads/main/ink-game/testing.lua"))()
    end)
end)

local creds = window:Tab("死铁轨", "6035145364")
local credits = creds:section("脚本", true)

credits:Button("自动刷债券", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/thantzy/thanhub/refs/heads/main/thanv1"))()
    end)
end)

credits:Button("LNteam死铁轨", function()
    pcall(function()
        loadstring(game:HttpGet("https://github.com/XiaoyeQWQ/state/raw/refs/heads/main/Dead-Rail.lua"))()
    end)
end)

local creds = window:Tab("ohio目前无法使用", "6035145364")
local credits = creds:section("脚本", true)

credits:Button("自动捡印钞机", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/IIIlll1ll1/Cracks/main/AdvancedLogic_Crack.lua"))()
    end)
end)

credits:Button("宿傩ohio脚本", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/XiProDev/XiPro/refs/heads/main/Free/Free/宿傩Ohio破解版.lua"))()
    end)
end)

local creds = window:Tab("巴掌模拟器", "6035145364")
local credits = creds:section("卡密whistle", true)

credits:Button("巴掌模拟器", function()
    pcall(function()
        loadstring(game:HttpGet('https://raw.githubusercontent.com/Umbrella-Scripter/Slap-Battles/refs/heads/main/MasteryFarmHub.lua'))()
    end)
end)

local creds = window:Tab("力量传奇", "6031097229")
local credits = creds:section("因为懒得压缩所以就自己找功能了", true)

credits:Toggle("自动比赛开关", "AR", false, function(AR)
    stopLoop("AutoBrawlLoop")
    if AR then
        createControlledLoop("AutoBrawlLoop", 2, function()
            pcall(function()
                game:GetService("ReplicatedStorage").rEvents.brawlEvent:FireServer("joinBrawl")
            end)
        end)
    end
end)

credits:Toggle("自动举哑铃", "ATYL", false, function(ATYL)
    stopLoop("AutoWeightLoop")
    if ATYL then
        createControlledLoop("AutoWeightLoop", 0.1, function()
            safeCharacterOperation(function(character)
                local part = workspace:FindFirstChild("SafetyPlatform") or Instance.new('Part')
                part.Name = "SafetyPlatform"
                part.Size = Vector3.new(500, 20, 530.1)
                part.Position = Vector3.new(0, 100000, 133.15)
                part.CanCollide = true
                part.Anchored = true
                part.Parent = workspace
                
                character.HumanoidRootPart.CFrame = part.CFrame + Vector3.new(0, 50, 0)
                
                for _, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                    if v:IsA("Tool") and v.Name == "Weight" then
                        v.Parent = character
                    end
                end
                
                game:GetService("Players").LocalPlayer.muscleEvent:FireServer("rep")
            end)
        end)
    else
        local part = workspace:FindFirstChild("SafetyPlatform")
        if part then part:Destroy() end
    end
end)

credits:Toggle("自动俯卧撑", "ATFWC", false, function(ATFWC)
    stopLoop("AutoPushupsLoop")
    if ATFWC then
        createControlledLoop("AutoPushupsLoop", 0.1, function()
            safeCharacterOperation(function(character)
                local part = workspace:FindFirstChild("SafetyPlatform") or Instance.new('Part')
                part.Name = "SafetyPlatform"
                part.Size = Vector3.new(500, 20, 530.1)
                part.Position = Vector3.new(0, 100000, 133.15)
                part.CanCollide = true
                part.Anchored = true
                part.Parent = workspace
                
                character.HumanoidRootPart.CFrame = part.CFrame + Vector3.new(0, 50, 0)
                
                for _, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                    if v:IsA("Tool") and v.Name == "Pushups" then
                        v.Parent = character
                    end
                end
                
                game:GetService("Players").LocalPlayer.muscleEvent:FireServer("rep")
            end)
        end)
    else
        local part = workspace:FindFirstChild("SafetyPlatform")
        if part then part:Destroy() end
    end
end)

credits:Toggle("自动仰卧起坐", "ATYWQZ", false, function(ATYWQZ)
    stopLoop("AutoSitupsLoop")
    if ATYWQZ then
        createControlledLoop("AutoSitupsLoop", 0.1, function()
            safeCharacterOperation(function(character)
                local part = workspace:FindFirstChild("SafetyPlatform") or Instance.new('Part')
                part.Name = "SafetyPlatform"
                part.Size = Vector3.new(500, 20, 530.1)
                part.Position = Vector3.new(0, 100000, 133.15)
                part.CanCollide = true
                part.Anchored = true
                part.Parent = workspace
                
                character.HumanoidRootPart.CFrame = part.CFrame + Vector3.new(0, 50, 0)
                
                for _, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                    if v:IsA("Tool") and v.Name == "Situps" then
                        v.Parent = character
                    end
                end
                
                game:GetService("Players").LocalPlayer.muscleEvent:FireServer("rep")
            end)
        end)
    else
        local part = workspace:FindFirstChild("SafetyPlatform")
        if part then part:Destroy() end
    end
end)

credits:Toggle("自动倒立身体", "ATDL", false, function(ATDL)
    stopLoop("AutoHandstandsLoop")
    if ATDL then
        createControlledLoop("AutoHandstandsLoop", 0.1, function()
            safeCharacterOperation(function(character)
                local part = workspace:FindFirstChild("SafetyPlatform") or Instance.new('Part')
                part.Name = "SafetyPlatform"
                part.Size = Vector3.new(500, 20, 530.1)
                part.Position = Vector3.new(0, 100000, 133.15)
                part.CanCollide = true
                part.Anchored = true
                part.Parent = workspace
                
                character.HumanoidRootPart.CFrame = part.CFrame + Vector3.new(0, 50, 0)
                
                for _, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                    if v:IsA("Tool") and v.Name == "Handstands" then
                        v.Parent = character
                    end
                end
                
                game:GetService("Players").LocalPlayer.muscleEvent:FireServer("rep")
            end)
        end)
    else
        local part = workspace:FindFirstChild("SafetyPlatform")
        if part then part:Destroy() end
    end
end)

credits:Toggle("自动锻炼", "ATAAA", false, function(ATAAA)
    stopLoop("AutoExerciseLoop")
    if ATAAA then
        createControlledLoop("AutoExerciseLoop", 0.1, function()
            safeCharacterOperation(function(character)
                local part = workspace:FindFirstChild("SafetyPlatform") or Instance.new('Part')
                part.Name = "SafetyPlatform"
                part.Size = Vector3.new(500, 20, 530.1)
                part.Position = Vector3.new(0, 100000, 133.15)
                part.CanCollide = true
                part.Anchored = true
                part.Parent = workspace
                
                character.HumanoidRootPart.CFrame = part.CFrame + Vector3.new(0, 50, 0)
                
                for _, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                    if v:IsA("Tool") and (v.Name == "Handstands" or v.Name == "Situps" or v.Name == "Pushups" or v.Name == "Weight") then
                        if v:FindFirstChildOfClass("NumberValue") then
                            v:FindFirstChildOfClass("NumberValue").Value = 0
                        end
                        character:WaitForChild("Humanoid"):EquipTool(v)
                        game:GetService("Players").LocalPlayer.muscleEvent:FireServer("rep")
                    end
                end
            end)
        end)
    else
        local part = workspace:FindFirstChild("SafetyPlatform")
        if part then part:Destroy() end
    end
end)

credits:Toggle("自动重生", "ATRE", false, function(ATRE)
    stopLoop("AutoRebirthLoop")
    if ATRE then
        createControlledLoop("AutoRebirthLoop", 0.5, function()
            pcall(function()
                game:GetService("ReplicatedStorage").rEvents.rebirthRemote:InvokeServer("rebirthRequest")
            end)
        end)
    end
end)

credits:Button("收集宝石", function()
    pcall(function()
        local jk = {}
        for _, v in pairs(game:GetService("ReplicatedStorage").chestRewards:GetDescendants()) do
            if v.Name ~= "Light Karma Chest" and v.Name ~= "Evil Karma Chest" then
                table.insert(jk, v.Name)
            end
        end
        for i = 1, #jk do
            task.wait(2)
            game:GetService("ReplicatedStorage").rEvents.checkChestRemote:InvokeServer(jk[i])
        end
    end)
end)

-- 跑步机功能（由于代码较长，这里只展示一个示例，其他类似）
credits:Toggle("沙滩跑步机10", "PPJ10", false, function(PPJ10)
    disconnectEvent("TreadmillMove")
    stopLoop("TreadmillLoop")
    
    if PPJ10 then
        createControlledLoop("TreadmillLoop", 0.1, function()
            safeCharacterOperation(function(character)
                character.Humanoid.WalkSpeed = 10
                character.HumanoidRootPart.CFrame = CFrame.new(238.671112, 5.40315914, 387.713165, -0.0160072874, -2.90710176e-08, -0.99987185, -3.3434191e-09, 1, -2.90212157e-08, 0.99987185, 2.87843993e-09, -0.0160072874)
            end)
        end)
        
        eventConnections.TreadmillMove = game:GetService("RunService").RenderStepped:Connect(function()
            safeCharacterOperation(function(character)
                if character.Humanoid then
                    character.Humanoid:Move(Vector3.new(10000, 0, -1), true)
                end
            end)
        end)
    end
end)

-- 其他跑步机功能类似处理...

-- 石头训练功能（示例）
credits:Toggle("石头0", "RK0", false, function(RK0)
    stopLoop("RockPunchLoop")
    if RK0 then
        createControlledLoop("RockPunchLoop", 0.1, function()
            safeCharacterOperation(function(character)
                for _, v in pairs(game.Players.LocalPlayer.Backpack:GetChildren()) do
                    if v:IsA("Tool") and v.Name == "Punch" then
                        character:WaitForChild("Humanoid"):EquipTool(v)
                    end
                end
                
                for _, h in pairs(character:GetChildren()) do
                    if h:IsA("Tool") and h.Name == "Punch" then
                        h:Activate()
                    end
                end
                
                character.HumanoidRootPart.CFrame = CFrame.new(7.60643005, 4.02632904, 2104.54004, -0.23040159, -8.53662385e-08, -0.973095655, -4.68743764e-08, 1, -7.66279342e-08, 0.973095655, 2.79580536e-08, -0.23040159)
            end)
        end)
    else
        safeCharacterOperation(function(character)
            character:WaitForChild("Humanoid"):UnequipTools()
        end)
    end
end)

-- 其他石头训练功能类似处理...

-- 传送功能
local teleportFunctions = {
    ["出生点"] = function() return CFrame.new(7, 3, 108) end,
    ["安全岛"] = function() return CFrame.new(-39, 10, 1838) end,
    ["幸运抽奖区域"] = function() return CFrame.new(-2606, -2, 5753) end,
    ["肌肉之王健身房"] = function() return CFrame.new(-8554, 22, -5642) end,
    ["传说健身房"] = function() return CFrame.new(4676, 997, -3915) end,
    ["永恒健身房"] = function() return CFrame.new(-6686, 13, -1284) end,
    ["神话健身房"] = function() return CFrame.new(2177, 13, 1070) end,
    ["冰霜健身房"] = function() return CFrame.new(-2543, 13, -410) end
}

for name, func in pairs(teleportFunctions) do
    credits:Button("传送到"..name, function()
        safeCharacterOperation(function(character)
            character.HumanoidRootPart.CFrame = func()
        end)
    end)
end

-- 其他游戏标签（由于篇幅限制，这里展示几个示例）
local creds = window:Tab("偷走脑红", "6035145364")
local credits = creds:section("脚本", true)

credits:Button("脚本1", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/Aqjua/Insta-Steal/refs/heads/main/Steal a brainrot"))()
    end)
end)

local creds = window:Tab("种植花园", "6035145364")
local credits = creds:section("脚本", true)

credits:Button("TX种植花园", function()
    pcall(function()
        TX = "退休脚本"
        QUN = "160369111"
        loadstring(game:HttpGet("\104\116\116\112\115\58\47\47\112\97\115\116\101\102\121\46\97\112\112\47\54\52\68\99\116\76\77\53\47\114\97\119"))()
    end)
end)

credits:Button("不知名种植花园", function()
    pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/MoziIOnTop/MoziIHub/refs/heads/main/GrowaGarden"))()
    end)
end)

-- 继续添加其他游戏标签...

-- 清理函数
local function cleanup()
    for name, _ in pairs(runningLoops) do
        runningLoops[name] = false
    end
    
    for name, connection in pairs(eventConnections) do
        if connection then
            connection:Disconnect()
        end
        eventConnections[name] = nil
    end
    
    -- 清理创建的对象
    local safetyPlatform = workspace:FindFirstChild("SafetyPlatform")
    if safetyPlatform then
        safetyPlatform:Destroy()
    end
end

game.Players.LocalPlayer.CharacterRemoving:Connect(cleanup)
game:BindToClose(cleanup)

-- 玩家重生时重新应用设置
game.Players.LocalPlayer.CharacterAdded:Connect(function(character)
    character:WaitForChild("Humanoid")
    -- 重新应用当前激活的设置
    for name, isRunning in pairs(runningLoops) do
        if isRunning then
            -- 这里可以添加重新启动特定循环的逻辑
        end
    end
end)
